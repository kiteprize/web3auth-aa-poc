# μμ²΄ μΈν”„λΌ λ©”μΈλ„· λ°°ν¬ λ° μ΄μ κ°€μ΄λ“λΌμΈ

ν”„λ΅λ•μ… ν™κ²½μ— μμ²΄ ERC-4337 μΈν”„λΌ(Bundler, Paymaster)λ¥Ό λ°°ν¬ν•κ³  μ•μ •μ μΌλ΅ μ΄μν•κΈ° μ„ν• κ°€μ΄λ“μ…λ‹λ‹¤. **λ†’μ€ μμ¤€μ DevOps λ° λ³΄μ• μ—­λ‰μ΄ μ”κµ¬λ©λ‹λ‹¤.**

## Phase 1: μ¤λ§νΈ μ»¨νΈλ™νΈ λ°°ν¬

1.  **μ½”λ“ κ°μ‚¬ (Audit):** λ°°ν¬ν•  λ¨λ“  μ¤λ§νΈ μ»¨νΈλ™νΈ(`Paymaster`, `Factory`)λ” λ°λ“μ‹ μ 3μ μ „λ¬Έ λ³΄μ• κ°μ‚¬ μ—…μ²΄λ΅λ¶€ν„° κ°μ‚¬λ¥Ό λ°›μ•„μ•Ό ν•©λ‹λ‹¤.
2.  **λ³΄μ•λ λ°°ν¬:**
    - λ°°ν¬μμ κ°μΈν‚¤λ” Ledgerμ™€ κ°™μ€ ν•λ“μ›¨μ–΄ μ›”λ › λλ” Gnosis Safe(λ©€ν‹°μ‹κ·Έ)λ¥Ό ν†µν•΄ κ΄€λ¦¬ν•©λ‹λ‹¤.
    - λ°°ν¬ μ¤ν¬λ¦½νΈ(Hardhat, Foundry)λ¥Ό μ‚¬μ©ν•κ³ , λ°°ν¬ νΈλμ­μ…μ„ μ‹ μ¤‘ν•κ² κ²€ν†  ν›„ μ„λ…ν•©λ‹λ‹¤.
3.  **μ†μ¤μ½”λ“ κ²€μ¦:** BscScanμ—μ„ λ°°ν¬λ λ¨λ“  μ»¨νΈλ™νΈμ μ†μ¤μ½”λ“λ¥Ό κ²€μ¦(Verify)ν•μ—¬ ν¬λ…μ„±μ„ ν™•λ³΄ν•©λ‹λ‹¤.

## Phase 2: Bundler μΈν”„λΌ λ°°ν¬ λ° μ΄μ

μμ²΄ Bundlerλ” μ„λΉ„μ¤μ ν•µμ‹¬ λ™λ§¥μ…λ‹λ‹¤. 24/7 μ•μ •μ μΈ μ΄μμ„ μ„ν• μΈν”„λΌ κµ¬μ¶•μ΄ ν•„μμ μ…λ‹λ‹¤.

1.  **μ»΄ν“¨νΈ ν™κ²½:**
    - **μ»¨ν…μ΄λ„ν™”:** `stackup-bundler`λ¥Ό Docker μ΄λ―Έμ§€λ΅ λΉλ“ν•μ—¬ λ°°ν¬ ν™κ²½μ μΌκ΄€μ„±μ„ ν™•λ³΄ν•©λ‹λ‹¤.
    - **λ°°ν¬:** AWS ECS/EKS, Google Cloud Run/GKEμ™€ κ°™μ€ μ»¨ν…μ΄λ„ μ¤μΌ€μ¤νΈλ μ΄μ… μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•μ—¬ λ°°ν¬ν•©λ‹λ‹¤. μµμ† 2κ° μ΄μƒμ μΈμ¤ν„΄μ¤λ¥Ό μ„λ΅ λ‹¤λ¥Έ κ°€μ© μμ—­(AZ)μ— λ°°ν¬ν•μ—¬ κ³ κ°€μ©μ„±μ„ ν™•λ³΄ν•©λ‹λ‹¤.
    - **λ΅λ“ λ°Έλ°μ„:** λ°°ν¬λ Bundler μΈμ¤ν„΄μ¤λ“¤ μ•μ— Application Load Balancerλ¥Όι…η½®ν•μ—¬ νΈλν”½μ„ λ¶„μ‚°ν•κ³  Health Checkλ¥Ό μν–‰ν•©λ‹λ‹¤.
2.  **BSC λ…Έλ“ μ—°κ²°:**
    - **Private RPC μ‚¬μ©:** QuickNode, Ankr, Chainstack λ“± μ λ£ RPC μ κ³µμ—…μ²΄μ **Private μ—”λ“ν¬μΈνΈ**λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤. Public RPCλ” μ†λ„ λ° μ•μ •μ„± λ¬Έμ λ΅ ν”„λ΅λ•μ… ν™κ²½μ— μ λ€ μ ν•©ν•μ§€ μ•μµλ‹λ‹¤.
    - **μμ²΄ λ…Έλ“ μ΄μ (κ³ κΈ‰):** μµκ³  μμ¤€μ μ•μ •μ„±κ³Ό μ„±λ¥μ΄ ν•„μ”ν•λ‹¤λ©΄ μ§μ ‘ BSC Full Node(Archive ν¬ν•¨)λ¥Ό μ΄μν•λ” κ²ƒμ„ κ³ λ ¤ν•  μ μμµλ‹λ‹¤.
3.  **λ³΄μ•:**
    - **DDoS λ°©μ–΄:** Bundlerμ κ³µκ° RPC μ—”λ“ν¬μΈνΈ μ•μ— Cloudflareμ™€ κ°™μ€ DDoS λ°©μ–΄ μ†”λ£¨μ…μ„ι…η½®ν•©λ‹λ‹¤.
    - **λ°©ν™”λ²½:** ν•„μ”ν• ν¬νΈ(RPC) μ™Έμ—λ” λ¨λ“  μ ‘κ·Όμ„ μ°¨λ‹¨ν•λ” μ—„κ²©ν• λ°©ν™”λ²½ κ·μΉ™μ„ μ μ©ν•©λ‹λ‹¤.
4.  **Bundler μ§€κ°‘ κ΄€λ¦¬:**
    - Bundlerμ EOA μ§€κ°‘μ€ `EntryPoint`μ— νΈλμ­μ…μ„ λ³΄λ‚΄λ” μ—­ν• λ§ μν–‰ν•©λ‹λ‹¤. μ΄ μ§€κ°‘μ κ°μΈν‚¤λ” AWS KMSμ™€ κ°™μ€ ν‚¤ κ΄€λ¦¬ μ„λΉ„μ¤μ— μ•μ „ν•κ² μ €μ¥ν•κ³ , Bundler μΈμ¤ν„΄μ¤λ” ν•΄λ‹Ή ν‚¤λ¥Ό μ‚¬μ©ν•  IAM κ¶ν•λ§ κ°–λ„λ΅ ν•©λ‹λ‹¤.
    - μ΄ μ§€κ°‘μ—λ” κ°€μ¤λΉ„λ΅ μ‚¬μ©ν•  μ†λ‰μ BNBλ§ μ μ§€ν•κ³ , μ£ΌκΈ°μ μΌλ΅ μ¶©μ „ν•λ” μ‹μ¤ν…μ„ κµ¬μ¶•ν•©λ‹λ‹¤.

## Phase 3: Paymaster μ„λ… μ„λΉ„μ¤ λ°°ν¬

1.  **π”¥ κ°μΈν‚¤ λ³΄μ•:** `PAYMASTER_SIGNER_PRIVATE_KEY`λ” **AWS KMS** λλ” **Google Cloud KMS**λ¥Ό μ‚¬μ©ν•μ—¬ κ΄€λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤.
2.  **μ„λ²„λ¦¬μ¤ λ°°ν¬:** Next.js API Route(`sponsor` API)λ” Vercel, AWS Lambda λ“± μ„λ²„λ¦¬μ¤ ν™κ²½μ— λ°°ν¬ν•μ—¬ λ³΄μ•κ³Ό ν™•μ¥μ„±μ„ ν™•λ³΄ν•©λ‹λ‹¤.

## Phase 4: μ΄μ λ° μ μ§€λ³΄μ

1.  **λ¨λ‹ν„°λ§ λ° μ•λ¦Ό (ν•„μ):**
    - **Paymaster μ”μ•΅:** `EntryPoint`μ— μμΉλ `Paymaster`μ BNB μ”μ•΅μ„ 5λ¶„λ§λ‹¤ μ²΄ν¬ν•κ³ , μ„κ³„κ°’ μ΄ν• μ‹ μ¦‰μ‹ μ΄μν€μ— μ•λ¦Ό(Slack, PagerDuty)μ„ λ³΄λ‚΄λ” μ‹μ¤ν…μ„ κµ¬μ¶•ν•©λ‹λ‹¤.
    - **Bundler μ§€κ°‘ μ”μ•΅:** Bundler EOA μ§€κ°‘μ BNB μ”μ•΅μ„ λ¨λ‹ν„°λ§ν•κ³  μ¶©μ „ν•©λ‹λ‹¤.
    - **μΈν”„λΌ λ¨λ‹ν„°λ§:** Bundler μΈμ¤ν„΄μ¤μ CPU/λ©”λ¨λ¦¬ μ‚¬μ©λ‰, RPC μ‘λ‹µ μ‹κ°„, μ—λ¬μ¨ λ“±μ„ Datadog, Grafana λ“±μΌλ΅ λ¨λ‹ν„°λ§ν•©λ‹λ‹¤.
2.  **μκΈ κ΄€λ¦¬ ν”„λ΅μ„Έμ¤:**
    - λ¨λ“  μ΄μ μκΈμ€ Gnosis Safeμ™€ κ°™μ€ λ©€ν‹°μ‹κ·Έ μ§€κ°‘(Treasury)μ— λ³΄κ΄€ν•©λ‹λ‹¤.
    - μ •κΈ°μ μΌλ΅ λλ” μ•λ¦Ό μμ‹  μ‹, μ •ν•΄μ§„ ν”„λ΅μ„Έμ¤μ— λ”°λΌ Treasuryμ—μ„ Paymasterμ™€ Bundler μ§€κ°‘μΌλ΅ μκΈμ„ μ΄μ²΄ν•©λ‹λ‹¤.
3.  **λ΅κΉ… λ° λ¶„μ„:**
    - Bundlerμ™€ Paymaster μ„λ… APIμ λ¨λ“  μ”μ²­κ³Ό μ‘λ‹µμ„ λ΅κΉ…ν•©λ‹λ‹¤.
    - λΉ„μ •μƒμ μΈ `UserOperation` μ”μ²­ ν¨ν„΄μ„ λ¶„μ„ν•μ—¬ μ–΄λ·°μ§•μ„ νƒμ§€ν•κ³  λ°©μ–΄ μ •μ±…μ„ κ³ λ„ν™”ν•©λ‹λ‹¤.
